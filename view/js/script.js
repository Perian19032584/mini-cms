var https = "http://cms.slavno.net";function notification_css(data){$('body').append('<div id="notification_css">'+data+'</div>');$('#notification_css').slideDown(500, function(){setTimeout(function(){$('#notification_css').slideUp(500, function(){$("#notification_css").remove();setTimeout(function(){location.reload();}, 100);});}, 700);});}function modal(){$("body").append('<div id="myModal" class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">'+  '<div class="modal-dialog modal-dialog-centered" role="document">'+    '<div class="modal-content">'+      '<div class="modal-header">'+        '<h5 class="modal-title" id="exampleModalLongTitle">Создайте ваш первый сайт</h5>'+        '<button type="button" class="close jjd" data-dismiss="modal" aria-label="Close">'+          '<span aria-hidden="true">&times;</span>'+        '</button>'+      '</div>'+      '<div class="modal-body">'+        '<input type="text" class="form-control" id="input_form_create_project" placeholder="Напишите название сайта..">'+      '</div>'+      '<div class="modal-footer">'+        '<button type="button" class="btn btn-secondary jjd" data-dismiss="modal">Отмена</button>'+        '<button type="button" class="btn btn-primary active_create_button_project">Сохранить</button>'+'</div></div></div></div>');}function modal2(){$("body").append('<div id="myModal2" class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">'+  '<div class="modal-dialog modal-dialog-centered" role="document">'+    '<div class="modal-content">'+      '<div class="modal-header">'+        '<h5 class="modal-title" id="exampleModalLongTitle">Вы уверены что хотите выйти</h5>'+        '<button type="button" class="close" data-dismiss="modal" aria-label="Close">'+          '<span aria-hidden="true">&times;</span>'+        '</button>'+      '</div>'+      '<div class="modal-footer">'+        '<button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>'+        '<button type="button" class="btn btn-primary">Выйти</button>'+'</div></div></div></div>');$('#myModal2').modal('show');}function shows(){$("body").append('<div class="container-fluid shows ml-5"><br><br>'+'<div class="alert alert-warning text-center col-5 yytr" role="alert">'+'Пожалуйста выберите проект, или создайте его..'+'</div><div class="alert alert-warning text-center col-5 yytr" role="alert">'+'Вы не можете пользоватся СЕЙЧАС нашими вкладками..'+'</div><div class="alert alert-warning text-center col-5 yytr" role="alert">'+'Ну же скорей создавай и получать хорошую прибыль от своего проекта'+'</div><div class="alert alert-warning text-center col-5 yytr" role="alert">'+'Мы берем всего 10% от вашего заработка от рекламы..'+'</div><div class="alert alert-warning text-center col-5 yytr" role="alert">'+'И будьте уверены вы нашли хорошую, добрую, и безопасную cms'+'</div><div class="alert alert-warning text-center col-5 yytr create_project_all" role="alert">Cоздать</div></div>');$('.shows div:eq(0)').slideDown(400, function(){$(this).next().slideDown(200, arguments.callee);});}function shade(data){$(data).animate({marginLeft: "-3%"}, 200);setTimeout(function(){$(data).animate({marginLeft: "3%"}, 200);}, 200);setTimeout(function(){$(data).animate({marginLeft: "-3%"}, 200);}, 400);setTimeout(function(){$(data).animate({marginLeft: "3%"}, 200);}, 600);setTimeout(function(){$(data).animate({marginLeft: "0%"}, 100);}, 800);}function mistake(data){var audio = new Audio;audio.src = "/view/audio/mistake.mp3";audio.play();$('body').append("<div id='mistake_block'>"+"<h2>"+ data +"</h2>"+"</div>");$("#mistake_block").animate({top: "0%"}, 800);setTimeout(function(){$("#mistake_block").animate({top: "-20%"}, 1200);}, 2000);setTimeout(function(){$("#mistake_block").remove();}, 3000);}function create_cookie_ajax(data){$.ajax({url: https+"?controller=main&method=create_cookie_ajax",type: "POST",data: {data: data},});}function show_cookie_ajax(data){var result = $.ajax({url: https+"?controller=main&method=show_cookie_ajax",type: "POST",data: {data: data},success: function(res){return res;}});} $('#create_project_one_button').on('click', function(){$('body').append('<div class="container-fluid row ewewfdnejusd">'+'<div class="col-1 row"></div>'+'<div id="form_create_project" class="col-4">'+'<input id="input_form_create_project" type="text" placeholder="Название вашего сайта">'+'<div class="button_form_create_project row">'+'<div class="col-7"><span id="button_color_cancel" class="btn">Отмена</span></div>'+'<span class="btn active_create_button_project">Создать</span>'+'</div></div></div>');$('.no_site').animate({top: "100%"}, 1800);$('.ewewfdnejusd').animate({top: "35%"}, 2500);});$('.carousel').carousel();$('body').on('click', '.active_create_button_project', function(){var name_project = $("#input_form_create_project").val();if(name_project != ""){$('#myModal').modal('hide');$.ajax({url: https+"?controller=element&method=staring_project",type: "POST",data: {data: name_project},success: function(res){$(".gfgd").append("<a onclick='project_choice(this)' class='dropdown-item project_choice'>"+name_project+"</a>");project_choice("<a onclick='project_choice(this)' class='dropdown-item project_choice'>"+name_project+"</a>");$(".call_control_menu").addClass("activedd");}});}else{mistake('Пожалуйста введите название сайта..');}});$('body').on('click', ".jjd", function(){shows();});$("body").on("click", ".create_project_all", function(){$('.shows div:eq(0)').slideUp(400, function(){$(this).next().slideUp(200, arguments.callee);});setTimeout(function(){$(".shows").remove();$('#myModal').modal('show');}, 1400);});$('body').on('click', '#button_color_cancel', function(){$('#form_create_project').slideUp(500, function(){$('#form_create_project').remove();$('#close_block_all').remove();});});$('.dropdown-toggle').dropdown();function project_choice(obj){var t = $(obj).text();$("body").removeClass("activedd");create_cookie_ajax(t);$('#ss').remove();$('#osxfsww').remove();$('.one').append('<span id="ss">'+t+'</span>');$('.oooda').append('<h2 id="osxfsww">'+t+'</h2>');$('.no_site').animate({top: "100%"}, 1800);setTimeout(function(){$('.no_site').remove();}, 1900);if($("#control_panel_block-2").length == 0){$('.activedd').removeClass("activedd");$('.call_control_menu').addClass("activedd");$("#block_control_bottom_table").css({"zIndex": "-1"});$("#block_control_bottom_table").animate({left: "-30%"}, 1000);setTimeout(function(){$("#block_control_bottom_table").remove();}, 1000);$(".if_table_no_selected").remove();$("body").append('<div id="control_panel_block-2">'+'<div class="container-fuild row l">'+'<div class="col-4"></div><div id="control_panel_block" class="col-6">'+'<img id="zzd" src="view/img/no-image.png">'+'<div class="block oooda"><h2 id="osxfsww">'+t+'</h2></div>'+'<div class="btn jqesz"><div class="dropdown">'+'<a class="btn-success dropdown-toggle btn xlsdffe" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Действие над сайтом</a>'+'<div class="dropdown-menu">'+'<a class="dropdown-item" href="/view_project_'+t+'">Просмотр</a>'+'<a class="dropdown-item" href="/editing_project_'+t+'">Редактирование</a>'+'<a class="dropdown-item position_cancel">Удалить</a>'+'<a class="dropdown-item position_change_name">Изменить название</a>'+'</div></a></div></div></div></div></div>');$("#control_panel_block-2").hide();$('#control_panel_block-2').slideDown(500, "linear");}}$('.developing').on('click', function(){alert('в разработке');}); $('body').on('click', '.position_cancel', function(){$('body').append('<div id="form-delete-project">'+'<h1>Вы увереные что хотите удалить весь проект?</h1>'+'<span id="cancel_delete_project">Отмена</span>'+'<span id="delete_project">Удалить</span></div>');$('body').append('<div id="close_block_all"></div>');});$('body').on('click', '#cancel_delete_project', function(){$('#form-delete-project').slideUp(500, function(){$('#form-delete-project').remove();$('#close_block_all').remove();});});$('body').on('click', '#delete_project', function(){var strGET = window.location.search.replace( '?', ''); $.ajax({url: https+"?controller=panel&method=delete_project",data: {data: strGET},success: function(res){$('#form-delete-project').slideUp(500, function(){$('#form-delete-project').remove();$('#close_block_all').remove(); });notification_css("Успешно было удалено");}});});$('body').on('click', '.position_change_name', function(){$('body').append('<div id="change_name_form">'+'<input type="text" id="input_form_change_project" placeholder="Изменить название на:">'+'<span id="cancel_change_project">Отмена</span><span id="change_project">Изменить</span></div>');$('body').append('<div id="close_block_all"></div>');});$('body').on('click', '#cancel_change_project', function(){$('#change_name_form').slideUp(500, function(){$('#change_name_form').remove();$('#close_block_all').remove();});});$('body').on('input', '#input_form_change_project', function(){if($('#input_form_change_project').val().length <=3){$('#change_project').css("background-color", "silver");$('#change_project').css("color", "black");$('#change_project').removeClass('active_change_button_project');}else{$('#change_project').css("background-color", "green");$('#change_project').css("color", "white");$('#change_project').addClass('active_change_button_project');}});$('body').on('click', '.active_change_button_project', function(){var data = $("#input_form_change_project").val();var strGET = window.location.search.replace( '?', ''); $.ajax({url: https+"?controller=panel&method=chenge_project",type: "POST",data: {data: data, strGET},success: function(res){$('#change_name_form').slideUp(500, function(){$('#change_name_form').remove();$('#close_block_all').remove();notification_css("Успешно было изменено");});}});});$("body").on("click", ".call_control_menu", function(){$(".if_table_no_selected").remove();$("#block_control_bottom_table").css({"zIndex": "-1"});$("#block_control_bottom_table").animate({left: "-30%"}, 1000);if($.cookie('project')){setTimeout(function(){$("#block_control_bottom_table").remove();$("body").append('<div id="control_panel_block-2">'+'<div class="container-fuild row l">'+'<div class="col-4"></div>'+'<div id="control_panel_block" class="col-6">'+'<img id="zzd" src="view/img/no-image.png"><div class="block oooda"><h2 id="osxfsww">'+$.cookie('project')+'</h2></div>'+'<div class="btn jqesz"><div class="dropdown">'+'<a class="btn-success dropdown-toggle btn xlsdffe" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Действие над сайтом</a>'+'<div class="dropdown-menu">'+'<a class="dropdown-item" href="/view_project">Просмотр</a>'+'<a class="dropdown-item" href="/editing_project">Редактирование</a>'+'<a class="dropdown-item position_cancel">Удалить</a>'+'<a class="dropdown-item position_change_name">Изменить название</a>'+'</div></div></div></div></div></div>');$("#control_panel_block-2").hide();$('#control_panel_block-2').slideDown(500, "linear");}, 900);}});$("body").on("click", "#exit", function(){alert('Привет, я выход');});$(".editing_h2").on('click', function(){$(".activedd").removeClass('activedd');$(this).addClass('activedd');if(!$.cookie('project')){shade(".if_sites_no_block");}if(!$.cookie('user')){shade(".vv");setTimeout(function(){$(".activedd").removeClass('activedd');}, 800);}}); $("body").on('click', "#create_table_bd", function(){var name = $("#create_text_bd").val();$(".table").remove();$("."+name).remove();$.ajax({url: "http://cms.slavno.net?controller=work_bd&method=create_table_bd",type: "POST",data: {data: name},success: function(res){$("body").append('<table class="table table-dark append_table v-'+name+'">'+'<thead><tr>'+'<th scope="row">#</th>'+'<th>Имя</th>'+'<th>Тип</th>'+'<th>По умолчанию</th>'+'<th>Управление</th>'+'<th class="bag_for_later"><img class="ddd" src="view/img/ddd.png"></th></tr></thead>');$('.v-' + name).append(res);$(".show_content_bd").append("<span class='dropdown-item "+name+"' id='css_app'>"+name+"</span>");}});});$("body").on("click", ".ddd", function(){var rr = $(this).parents();var dd = $(rr[3]).attr('class').split('-');var data = $(".id_add").last().attr('class').split(' ');var ints = parseInt(data[1]) + 1;$('.v-'+dd[2]).append("<tr>"+"<th class='id_add "+ints+"'>"+ints+"</th>"+'<th class="bag_fix_oo_table"><input type="text" class="zz_width meaning_names" id="inlineFormInputGroupUsername2" placeholder="Название"></th>'+'<th class="bag_fix_00_table"><select class="form-control form-control-sm dsdtsdc">'+'<option class="fix_problem_js_33" value="int(11)">int(11)</option>'+'<option value="varchar(255)">varchar(255)</option>'+'<option value="text">text</option>'+'<option value="date">date</option>'+'</select></th>'+'<th>Ничего</th>'+'<th><img class="img_setting_x remove_time" src="view/img/remove.png"><img class="img_setting_x edit_time" src="view/img/edit.png"></th>'+'<th><img class="ddd_css" src="view/img/check_mark.png"></th></tr>');$(".ddd").removeClass("ddd").addClass("ddd_css");});$("body").on("click", ".ddd_css", function(){if($(".meaning_names").val() != ""){var rr = $(this).parents();var dd = $(rr[3]).attr('class').split('-');var data = {};data['meaning_names'] = $(".meaning_names").val();data['dsdtsdc'] = $(".dsdtsdc").val();data['name'] = dd[2];$.ajax({url: "http://cms.slavno.net?controller=work_bd&method=add_bd_table",type: "POST",data: {data: data},success: function(res){if(res == "success"){$(".ddd_css").remove();$(".remove_time").addClass("remove_string_table").removeClass("remove_time");$(".meaning_names").remove();$(".edit_time").removeClass("edit_time");$('.dsdtsdc').remove();$(".bag_fix_oo_table").html(data['meaning_names']);$(".bag_fix_00_table").html(data['dsdtsdc']);$(".bag_fix_oo_table").removeClass('bag_fix_oo_table');$(".bag_fix_00_table").removeClass('bag_fix_00_table');$(".bag_for_later").append("<img class='ddd' src='view/img/ddd.png'>");}if(res == "fail"){mistake('Запрос был провален');}}});}else{mistake('Пожалуйста заполните поле имени');}});$("body").on("click", ".remove_string_table", function(){var rr = $(this).parents();var dd = $(rr[3]).attr('class').split('-');var data = {};var delete_text = $("#css_app");data['dsdtsdc'] = dd['2'];data['table_name'] = $(rr[1]).find(".for_remove").text();$.ajax({url: "http://cms.slavno.net?controller=work_bd&method=delete_string_table",type: "POST",data: {data: data},success: function(res){rr[1].remove();if ($('.interval').html().trim() === ''){$(".v-" + dd[2]).remove();$("."+dd[2]).remove();}}});});$("body").on("click", ".remove_time", function(){var rr = $(this).parents();rr[1].remove();});$("body").on("click", ".edit_time", function(){mistake('Вы уже работаете над этой таблицой');});$("#content_call").on("click", function(){if($.cookie('user') && $.cookie('project')){$('#control_panel_block-2').slideUp(500, "linear", function(){$('#control_panel_block-2').remove();});$.ajax({url: "http://cms.slavno.net?controller=work_bd&method=show_bd_table",success: function(res){if($('#block_control_bottom_table').length == 0){$("body").append('<h2 class="text-center ml-5 if_table_no_selected">Выберите таблицу или создайте её..</h2>');$("body").append('<div id="block_control_bottom_table" class="fixed-bottom row">'+'<div class="dropdown block_name_bd">'+'<button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+'Базы данных</button>'+'<div class="dropdown-menu show_content_bd"></div></div>'+'<div class="input-group row col-3">'+'<input id="create_text_bd" type="text" class="form-control" placeholder="Добавить таблицу..">'+'<div class="input-group-append">'+'<button class="btn btn-outline-secondary" id="create_table_bd" type="button">Жмяк</button>'+'</div></div></div>');$("#block_control_bottom_table").animate({left: "17.8%"}, 1000);setTimeout(function(){$("#block_control_bottom_table").css({'zIndex': 1});}, 1000);$(".show_content_bd").append(res);}}});}});$("body").on("click", "#css_app", function(){var data = $(this).text();$.ajax({url: "http://cms.slavno.net?controller=work_bd&method=create_table_bd",type: "POST",data: {data: data},success: function(res){$(".append_table").remove();$("body").append('<table class="table table-dark append_table v-'+data+'">'+'<thead><tr>'+'<th scope="row">#</th>'+'<th>Имя</th>'+'<th>Тип</th>'+'<th>По умолчанию</th>'+'<th>Управление</th>'+'<th class="bag_for_later"><img class="ddd" src="view/img/ddd.png"></th></tr></thead>');$('.v-' + data).append(res);}});}); if(!$.cookie('user')){if($('.block_regis').length == 0 && $('.block_auth').length == 0){$(".vv").css({"display" : "block"});$(".vv").animate({top: "30%",}, 2500); setTimeout(function(){$(".block_auth").remove();$("#absolute_block_hoster").css({'display': 'none'});$(".reg_auth_block").append("<div class='block_auth'>"+"<input id='result_email_auth' class='auth' type='text' placeholder='Введите ваш email'>" +"<input id='result_password_auth' class='auth' type='password' placeholder='Введите ваш пароль'>" +"<button id='auth' class='css_button_reg' title='Нажми чтобы продолжить'>Авторизация</button>"+"</div>");$("#button_reg").removeClass("active_button-reg_auth");$("#button_auth").addClass("active_button-reg_auth");$("#button_auth").html(">>>Авторизация<<<");$("#button_reg").html("Регистрация");$(".reg_auth_block").animate({height: "365px"}, 500);$(".block_regis").animate({opacity: 0}, 150);$(".block_auth").animate({opacity: 1}, 500);}, 2000);}} $('#button_reg').click(function(){$(".block_auth").remove();if($(".block_regis").length == 0){$(".reg_auth_block").append("<div class='block_regis'>"+"<input id='result_name_reg' type='text' placeholder='Введите ваше Имя'>"+"<input id='result_email_reg' type='text' placeholder='Введите ваш email'>"+"<input id='result_password_reg' type='password' placeholder='Введите ваш пароль'>"+"<input id='result_password2_reg' type='password' placeholder='Повторите ваш пароль'>"+"<button id='button_reg_now' class='css_button_reg' title='Нажми чтобы продолжить'>Регистрация</button>"+"</div>");}    $("#button_auth").removeClass("active_button-reg_auth");$("#button_reg").addClass("active_button-reg_auth");$("#button_reg").html(">>>Регистрация<<<");$("#button_auth").html("Авторизация");$(".reg_auth_block").animate({height: "510px"}, 500);setTimeout(function(){$(".block_regis").animate({opacity: 1}, 500);}, 500)});$('#button_auth').click(function(){setTimeout(function(){$(".block_regis").animate({opacity: 0}, 500);}, 500);setTimeout(function(){$(".block_regis").remove();}, 1000);$(".block_regis").remove();if($(".block_auth").length == 0){$(".reg_auth_block").append("<div class='block_auth'>"+"<input id='result_email_auth' class='auth' type='text' placeholder='Введите ваш email'>" +"<input id='result_password_auth' class='auth' type='password' placeholder='Введите ваш пароль'>" +"<button id='auth' class='css_button_reg' title='Нажми чтобы продолжить'>Авторизация</button>"+"</div>");}    $("#button_reg").removeClass("active_button-reg_auth");$("#button_auth").addClass("active_button-reg_auth");$("#button_auth").html(">>>Авторизация<<<");$("#button_reg").html("Регистрация");$(".reg_auth_block").animate({height: "365px"}, 500);setTimeout(function(){$(".block_auth").animate({opacity: 1}, 500);}, 500);});$("body").on("click", "#button_reg_now", function(){var param = {};param['result_name_reg'] = $("#result_name_reg").val();param['result_email_reg'] = $("#result_email_reg").val();param['result_password_reg'] = $("#result_password_reg").val();param['result_password2_reg'] = $("#result_password2_reg").val();if(param['result_name_reg'] != "" && param['result_email_reg'] != "" && param['result_password_reg'] != "" && param['result_password_reg'] != ""){if(param['result_password_reg'] == param['result_password2_reg']){ $.ajax({url: https+"?controller=reg_auth&method=registration", type: 'POST',data: {data: param},success: function(res){var data = res.split(" ");if(data[0] == "mistake_no"){$('.block_regis').animate({top: "100%"}, 2000);$('.vv').animate({top: "100%"}, 2000);setTimeout(function(){$('.block_regis').remove();$('.reg_auth_block').remove();$(".vv").css({"display" : "none"});}, 2000);$('body').append("<div class='container-fuild row l' id='bag_js_fix_1'>"+"<div class='col-4'></div>"+"<div id='pozdravlenia' class='col-5 btn ml-5'>"+"<h2>Осталось совсем чучуть</h2>"+"<span class='pozdravlenia_text'>Мы выслали вам на почту "+ data[1] +"<br> зашифрованную ссылку..</span><br>"+"<span class='pozdravlenia_text'>Нажимая на её вы автоматически будете зарегистрированы..</span><br>"+"<span class='pozdravlenia_text2'>Спасибо что выбираете нас</span>"+"<span class='pozdravlenia_text2'>Ссылка работает 12 часов</span>"+"</div></div>");$('#bag_js_fix_1').animate({top: "+35%"}, 3000);}if(res == "mistake_name_inv_rus"){mistake('Для дальнейшей работы на нужно имя на Английском');}if(res == "mistake_name_kol"){mistake('Количество символов имя, должно быть от 4 до 50');}if(res == "mistake_password_kol"){mistake('Количество символов пароля, должно быть от 4 до 50');}if(res == "mistake_email"){mistake('Некорректный email');}if(res == "mistake_user_kol"){mistake('Данный аккаунт уже занят');}if(res == "mistake_user_kol"){mistake('Данный аккаунт уже занят');}}});}else{mistake('Пароли не совпадают');}}else{mistake('Пожалуйста заполните все данные');}});$('body').on('click', '#auth', function(){var param = {};param['result_email_auth'] = $("#result_email_auth").val();param['result_password_auth'] = $("#result_password_auth").val();if(param['result_email_auth'] != "" && param['result_password_auth'] != ""){$.ajax({url: https+"?controller=reg_auth&method=authorization",type: 'POST',data: {data: param},success: function(res){var data = res.split(" ");if(data[0] == 'successfully_logged'){$(".vv").animate({top: "100%"}, 2200);$(".block_auth").animate({top: "100%"}, 2000);setTimeout(function(){$(".block_auth").remove();$(".reg_auth_block").remove();$(".vv").remove();}, 2000);$.ajax({url: https+"?controller=main&method=show_sites",success: function(res){if(res == ""){modal();setTimeout(function(){$('#myModal').modal('show');}, 2000);}else{$("body").append('<div class="container-fuild row l no_site content">'+'<div class="col-4"></div>'+'<div class="col-xl-5 if_sites_no_block">'+'<h3 class="text-center mt-1">Пожалуйста выберите сайт..</h3>'+'</div></div>');$(".no_site").css({'top': '-35%'});$(".no_site").animate({top: '43%'}, 3800);$(".gfgd").append(res);}}});setTimeout(function(){ $("#sss").html(data[1]);$(".d-none").removeClass('d-none');$('.caret-off').addClass('btn-secondary');}, 1500);}if(res == 'mistake_user'){mistake('Данный аккаунт не существует, или вы не правильно ввели данные');}}});}else{mistake('Пожалуйста заполните всё данные');}});